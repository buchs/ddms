<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="static_files/css/bootstrap.min.css" />
   	<link rel="stylesheet" href="static_files/js/jstree/theme-default/style.min.css" />
    <link rel="stylesheet" href="static_files/css/jquery-ui.min.css" />

    <style>
      @page {
          margin-right: 5px;
          margin-left: 5px;
      }

      .toggle-green {
        color: green;
        font-weight: bold;
      }

      .toggle-red {
        color: red;
        font-weight: normal;
      }

      .label-removal {
        background-image: url('/static_files/img/label-removal.png');
      }

      .bigpath {
          font-size: 20px;
            /* the following keep the text from getting selected on double click */
          -webkit-user-select: none; /* webkit (safari, chrome) browsers */
          -moz-user-select: none; /* mozilla browsers */
          -khtml-user-select: none; /* webkit (konqueror) browsers */
          -ms-user-select: none; /* IE10+ */
      }

      .compact-button {
        line-height: 97%;
      }

      .addlabel-input {
           /* z-index: 1000; */
      }

      .addlabel-dialog {
           /* z-index: 1000; */
      }

      #modalIns{
           width: 500px;
      }

      .ui-autocomplete {
          z-index: 1100
      }

      .mark-check {
          float: right;
          border: 0;
          padding: 0;
          margin-right: 0;
      }

      .bottom-border {
          border-bottom: 1px solid blue;
      }

    </style>

    <link rel="icon" type="image/png" href="/static_files/img/favicon.png">
    <title>DDMS</title>
</head>
<body>
   <div class="mx-1">
      <header>

        <nav class="navbar navbar-expand-sm navbar-light bg-light p-1">
              <ul class="navbar-nav mr-auto">

                <li class="my-0 p-0 mr-2">
                  <img src="/static_files/img/ddms.png" height="20"/>
                </li>

                <li class="my-0">
                  <button
                    id="browse-list"
                    class="nav-button p-0 btn-sm btn-primary compact-button mr-2"
                    onclick="showBrowseList()"
                    data-toggle="modal"
                    data-target="#browse_list_modal"
                  >
                      Browse List
                  </button>
                </li>

                <li>
                    <span class="my-0 mr-1">Search:</span>
                </li>

                <li class="my-0 p-0" onclick="toggle_tree_dir()">
                      <span id="toggle-dir"  class="toggle-green" >Dir</span> /
                      <span id="toggle-tree" class="toggle-red"   >Tree</span>
                </li>

                <li class="my-0 ml-2 mr-2">
                    <span class="form-check-inline autoc">
                          <label class="my-auto" for="selectedDirs">Dirs:</label>
                          <input type="text" class="form-control-sm p-0 my-0" id="selectedDirs" placeholder="empty">
                    </span>
                </li>

                <li class="my-0 ml-0 mr-2">
                  <span class="form-check-inline">
                      <label class="my-auto" for="selectedLabels" class="">Labels:</label>
                      <input type="text" class="form-control-sm p-0"
                             id="selectedLabels" placeholder="empty">
                  </span>
                </li>

                <li class="my-0">
                  <button
                    id="go"
                    class="nav-button p-0 btn-sm btn-primary compact-button"
                    onclick="do_main_search()">
                      Go
                  </button>
                </li>
              </ul>
            </form>
        </nav>
      </header>


        <div class="modal" id="browse_list_modal" role="dialog">
             <div class="modal-dialog" role="document">
                 <div class="modal-content">
                     <div class="modal-header">
                         <h3>Browse List</h3>
                         <button type="button" class="close btn button-sm btn-danger ml-auto mr-0 my-0 p-0" data-dismiss="modal">
                            &times;</button>
                     </div>
                     <div class="modal-body">
                         <div id="browselist" class="browse_list_class"></div>
                     </div>
                 </div>
             </div>
         </div>


        <div class="modal addlabel-dialog" id="add_label_modal" role="dialog">
             <div class="modal-dialog" role="document">
                 <div class="modal-content">
                     <div class="modal-header">
                         <h3 class="modal-title">Add A Label</h3>
                         <button type="button" class="close btn button-sm btn-danger ml-auto mr-0 my-0 p-0" data-dismiss="modal">
                            &times;</button>
                     </div>
                     <div class="modal-body">
                         <div id="add_label_dialog" class="add_label_class form-check-inline">
                             <span class="my-10">
                                 <span class="form-check-inline">
                                     <!-- input type="text" class="form-control addlabel-input" autofocus -->
                                     <input type="text" class="form-control addlabel-input"
                                         id="add_a_label_input" placeholder="enter label here" tabindex="1"/>
                                 </span>
                             </span>
                         </div>
                         <div>
                             <button type="button" class="btn btn-primary ml-0 mr-auto my-5" onclick="finish_add_a_label()">
                                 Add it
                             </button>
                             <button type="button" class="btn btn-secondary ml=auto my-5" onclick="cancel_add_a_label()">
                                 Cancel
                             </button>
                         </div>
                     </div>
                 </div>
             </div>
         </div>


         <div class="modal bulk-action-dialog" id="bulk_action_modal" role="dialog">
             <div class="modal-dialog" role="document">
                 <div class="modal-content">
                     <div class="modal-header">
                         <h3 class="modal-title">Bulk Actions</h3>
                         <button type="button" class="close btn button-sm btn-danger ml-auto mr-0 my-0 p-0"
                                 data-dismiss="modal" onclick="cancel_bulk_action()">
                            &times;</button>
                     </div>
                     <div class="modal-body">
                         <form onsubmit="return false;">
                             <div class="form-group">
                                 <input type="radio" id="bulk-radio-add" name="bulk-action-radiosX" checked tabindex="4">
                                 <label for="bulk-radio-add">Add labels</label>
                             </div>
                             <div class="form-group">
                                 <input type="radio" id="bulk-radio-del" name="bulk-action-radiosX" tabindex="5">
                                 <label for="bulk-radio-del">Delete labels</label>
                             </div>
                             <div class="my-8 form-group">
                                 <input type="text" class="" tabindex="1"
                                    id="bulk_action_label_input" placeholder="enter labels here" />
                             </div>
                             <button type="button" class="btn btn-primary ml-0 mr-auto my-5"
                                      tabindex="2" onclick="finish_bulk_action()" data-dismiss="modal">
                                 Apply Action
                             </button>
                             <button type="button" class="btn btn-secondary ml=auto my-5" data-dismiss="modal"
                                       tabindex="3" onclick="cancel_bulk_action()">
                                 Cancel
                             </button>
                         </form>
                     </div>
                 </div>
             </div>
         </div>




        <!-- The contents of the main_section will be blown away when we have run a search -->
        <div id="main_section">
            <h4>Assignments for David</h4>
            <ol>
                <li>You need to decide how you would like an item from the search results opened, when double
                    clicked. I can use the applications you would like and try to run those for documents like
                    Word or LibreOffice. I can open text files, images, etc. in the browser, if you want or
                    otherwise. Tell me how you want that to work. You can add the paths for the executables
                    to run. Add in as a constant at the top of ddms.py. You could try to stay in the browser
                    or stay away from the browser. I can open in new tabs in the browser.</li>
                <li>The browse list should be fully functional. When you select one or more items, they should
                    appear, comma-delimited, in the "Dirs" field. You can also type into that field. Right now,
                    when you pop up the browse list, the assumption is that whatever you had in the Dirs field
                    is going to be overwritten. It could be made more intelligent, with the browse list
                    opening with the items from the Dirs field preselected. Thus the browse list could be used
                    additively to add directories to the ones already present.</li>
                <li>Search is now operational. Start with nothing in the Dirs or Labels boxes and press the
                    "Go" button on the top right. You should get back a listing of just the top level
                    directory. Next, click the Dir/Tree region to toggle to Tree mode. The same search should
                    dump the whole thing (maybe not, if you have a lot). Use the Browse List to add one or more
                    directories in the Dirs box. I randomly assigned labels for half of the items and these
                    labels are fruit. These might not be working correctly. Your testing is appreciated. </li>
            </ol>
            <h4>Notes on the GUI</h4>
            <p>What does the UI look like? Kinds of things it should show:
            <ol>
                <li>) a browseable listing of the whole directory tree, just text
                <li>) a display of the results of a search. Search can be from a combination of 0
                    or more labels and directory path or directory tree. This result will have
                    the previews inserted into it.
                <li>) a click on a file item from the browsable tree or from the search results
                    should either open the file in a new browser tab or an external tool.
                <li>Text boxes show the current items. May be populated from a browseable
                    selection or typed into the box, with completion. With the labels box: you
                    can type with completion for a comma delimited list or pull up a list (with
                    current labels already selected. Also need an add label pop-up. Choice to label
                    selected or all items. Maybe we select from a little checkbox by each item.
                    Do selection before accessing the label pop-up.
            </ol>


            <h4>Open questions</h4>
            <ol><li>show should filesystem monitor communicate to the web server changes that are noticed?
                <li>how should the web GUI indicate changes?</li></ol>
            <hr>
        </div>
    </div>

     <script src="/static_files/js/jquery-3.3.1.js"></script>
     <script src="/static_files/js/popper.min.js"></script>
     <script src="/static_files/js/bootstrap.min.js"></script>
     <script src="/static_files/js/jstree/jstree.min.js"></script>
     <script src="/static_files/js/jquery-ui.min.js"></script>
     <script src="/static_files/js/main.js"></script>

</body>
</html>